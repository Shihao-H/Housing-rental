{"ast":null,"code":"import{appConstants}from\"../constants/constant\";export var login=function login(user,success,failure){// we can use a library called qs   qs.stringify(user) to get a urlencoded form data\nvar userFormData=new FormData();userFormData.append('username',user.username);userFormData.append('password',user.password);// ES6 fetch API, async, await\nvar loginPromise=fetch(\"\".concat(appConstants.API,\"/login\"),{method:'POST',body:userFormData,credentials:'include'}).then(function(res){return res.json();}).then(function(res){res.success?// check success is a function\ntypeof success==='function'&&success():typeof failure==='function'&&failure();return res;}).catch(function(err){typeof failure==='function'&&failure(err);return err;});return{type:appConstants.LOGIN,payload:loginPromise};};","map":{"version":3,"sources":["/Users/shihaohuang/Documents/Mercury/community-management/client/src/actions/auth.action.js"],"names":["appConstants","login","user","success","failure","userFormData","FormData","append","username","password","loginPromise","fetch","API","method","body","credentials","then","res","json","catch","err","type","LOGIN","payload"],"mappings":"AAAA,OAAQA,YAAR,KAA2B,uBAA3B,CAKA,MAAO,IAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,IAAD,CAAOC,OAAP,CAAgBC,OAAhB,CAA4B,CAC7C;AACA,GAAMC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,QAAJ,EAArB,CACAD,YAAY,CAACE,MAAb,CAAoB,UAApB,CAAgCL,IAAI,CAACM,QAArC,EACAH,YAAY,CAACE,MAAb,CAAoB,UAApB,CAAgCL,IAAI,CAACO,QAArC,EACA;AACA,GAAMC,CAAAA,YAAY,CAAGC,KAAK,WACnBX,YAAY,CAACY,GADM,WAEtB,CACIC,MAAM,CAAE,MADZ,CAEIC,IAAI,CAAET,YAFV,CAGIU,WAAW,CAAE,SAHjB,CAFsB,CAAL,CAQZC,IARY,CAQP,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EARI,EASZF,IATY,CASP,SAAAC,GAAG,CAAI,CACTA,GAAG,CAACd,OAAJ,CACI;AACA,MAAOA,CAAAA,OAAP,GAAmB,UAAnB,EAAiCA,OAAO,EAF5C,CAGI,MAAOC,CAAAA,OAAP,GAAmB,UAAnB,EAAiCA,OAAO,EAH5C,CAIA,MAAOa,CAAAA,GAAP,CACH,CAfY,EAgBZE,KAhBY,CAgBN,SAAAC,GAAG,CAAI,CACV,MAAOhB,CAAAA,OAAP,GAAmB,UAAnB,EAAiCA,OAAO,CAACgB,GAAD,CAAxC,CACA,MAAOA,CAAAA,GAAP,CACH,CAnBY,CAArB,CAqBA,MAAO,CACHC,IAAI,CAAErB,YAAY,CAACsB,KADhB,CAEHC,OAAO,CAAEb,YAFN,CAAP,CAIH,CA/BM","sourcesContent":["import {appConstants} from \"../constants/constant\";\n\n\n\n\nexport const login = (user, success, failure) => {\n    // we can use a library called qs   qs.stringify(user) to get a urlencoded form data\n    const userFormData = new FormData();\n    userFormData.append('username', user.username);\n    userFormData.append('password', user.password);\n    // ES6 fetch API, async, await\n    const loginPromise = fetch(\n        `${appConstants.API}/login`,\n        {\n            method: 'POST',\n            body: userFormData,\n            credentials: 'include'\n        }\n        )\n            .then(res => res.json())\n            .then(res => {\n                res.success ?\n                    // check success is a function\n                    typeof success === 'function' && success() :\n                    typeof failure === 'function' && failure();\n                return res;\n            })\n            .catch(err => {\n                typeof failure === 'function' && failure(err);\n                return err;\n            })\n    ;\n    return {\n        type: appConstants.LOGIN,\n        payload: loginPromise\n    };\n};\n\n"]},"metadata":{},"sourceType":"module"}