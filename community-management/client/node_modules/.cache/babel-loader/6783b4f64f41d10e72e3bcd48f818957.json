{"ast":null,"code":"import React from'react';import Toolbar from\"@material-ui/core/Toolbar\";import AppBar from\"@material-ui/core/AppBar\";import'./Header.scss';import{NavLink}from\"react-router-dom\";import{appConstants}from\"../constants/constant\";import Button from\"@material-ui/core/Button/Button\";import{checkLogin}from\"../actions/user.action\";import{useDispatch,useSelector}from\"react-redux\";import IconButton from\"@material-ui/core/IconButton/IconButton\";import NamesIcon from'@material-ui/icons/People';var Header=function Header(){var user=useSelector(function(_ref){var user=_ref.user;return user;});var dispatch=useDispatch();// dispatch(checkLogin());\nvar loginState=useSelector(function(appState){return{auth:appState.message};});React.useEffect(function(){dispatch(checkLogin());},[loginState.auth]);var logout=function logout(){var logoutPromise=fetch('http://localhost:8089/logout',{credentials:'include'}).then(function(res){return res.json();}).catch();dispatch({type:appConstants.LOGOUT,payload:logoutPromise});};return/*#__PURE__*/React.createElement(AppBar,{position:\"static\",className:\"Header\"},/*#__PURE__*/React.createElement(Toolbar,null,/*#__PURE__*/React.createElement(NavLink,{to:appConstants.floorPlanRoute},/*#__PURE__*/React.createElement(\"div\",{style:{color:'black'}},\"MSI\")),/*#__PURE__*/React.createElement(\"div\",{className:\"nav-actions\"},/*#__PURE__*/React.createElement(NavLink,{to:appConstants.floorPlanRoute},/*#__PURE__*/React.createElement(Button,null,\"Floor Plans\")),/*#__PURE__*/React.createElement(NavLink,{to:appConstants.locationsRoute},/*#__PURE__*/React.createElement(Button,null,\"Locations\")),/*#__PURE__*/React.createElement(NavLink,{to:appConstants.quickLookRoute},/*#__PURE__*/React.createElement(Button,null,\"QuickLook\")),/*#__PURE__*/React.createElement(NavLink,{to:appConstants.FAQRoute},/*#__PURE__*/React.createElement(Button,null,\"FAQ\")),/*#__PURE__*/React.createElement(NavLink,{to:appConstants.loginRoute,style:{textDecoration:'none'}},user?/*#__PURE__*/React.createElement(Button,{onClick:logout,className:\"auth-action\"},\"Logout\"):/*#__PURE__*/React.createElement(Button,{className:\"auth-action\"},\"Login\")),// user ?\n//     <NavLink to={appConstants.userPageRoute}>\n//         <IconButton>\n//             <NamesIcon className=\"nav-action-icon\"/>\n//         </IconButton>\n//     </NavLink>\n//     :\n//     <span></span>\nuser?user.profiles[0].id===2?/*#__PURE__*/React.createElement(NavLink,{to:appConstants.userPageRoute},/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(NamesIcon,{className:\"nav-action-icon\"}))):/*#__PURE__*/React.createElement(NavLink,{to:appConstants.adminPageRoute},/*#__PURE__*/React.createElement(IconButton,null,/*#__PURE__*/React.createElement(NamesIcon,{className:\"nav-action-icon\"}))):/*#__PURE__*/React.createElement(\"a\",null))));};export default Header;","map":{"version":3,"sources":["/Users/shihaohuang/Documents/Mercury/community-management/client/src/header/Header.js"],"names":["React","Toolbar","AppBar","NavLink","appConstants","Button","checkLogin","useDispatch","useSelector","IconButton","NamesIcon","Header","user","dispatch","loginState","appState","auth","message","useEffect","logout","logoutPromise","fetch","credentials","then","res","json","catch","type","LOGOUT","payload","floorPlanRoute","color","locationsRoute","quickLookRoute","FAQRoute","loginRoute","textDecoration","profiles","id","userPageRoute","adminPageRoute"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport './Header.scss';\nimport {NavLink} from \"react-router-dom\";\nimport {appConstants} from \"../constants/constant\";\nimport Button from \"@material-ui/core/Button/Button\";\nimport {checkLogin} from \"../actions/user.action\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport IconButton from \"@material-ui/core/IconButton/IconButton\";\nimport NamesIcon from '@material-ui/icons/People';\n\nconst Header = () => {\n    const user = useSelector(({user}) => {\n        return user;\n    });\n\n\n\n    const dispatch = useDispatch();\n    // dispatch(checkLogin());\n\n\n    const loginState = useSelector(appState => {\n        return {\n            auth: appState.message\n        };\n    });\n\n\n    React.useEffect(()=>{\n        dispatch(checkLogin());\n    }, [loginState.auth]);\n\n\n    const logout = () => {\n        const logoutPromise = fetch('http://localhost:8089/logout', {credentials: 'include'})\n            .then(res => res.json())\n            .catch();\n        dispatch({\n            type: appConstants.LOGOUT,\n            payload: logoutPromise\n        });\n\n    };\n\n\n    return (\n        <AppBar position=\"static\" className=\"Header\">\n            <Toolbar>\n                    <NavLink to={appConstants.floorPlanRoute}>\n                        <div style={{ color: 'black' }}>MSI</div>\n                    </NavLink>\n\n                <div className=\"nav-actions\">\n                    <NavLink to={appConstants.floorPlanRoute}>\n                        <Button>Floor Plans</Button>\n                    </NavLink>\n\n                    <NavLink to={appConstants.locationsRoute}>\n                        <Button>Locations</Button>\n                    </NavLink>\n                    <NavLink to={appConstants.quickLookRoute}>\n                        <Button>QuickLook</Button>\n                    </NavLink>\n                    <NavLink to={appConstants.FAQRoute}>\n                        <Button>FAQ</Button>\n                    </NavLink>\n                    <NavLink to={appConstants.loginRoute} style={{textDecoration: 'none'}}>\n                        {\n                            user ?\n                                <Button onClick={logout} className=\"auth-action\">Logout</Button>\n                                :\n                                <Button className=\"auth-action\">Login</Button>\n                        }\n                    </NavLink>\n                    {\n                        // user ?\n                        //     <NavLink to={appConstants.userPageRoute}>\n                        //         <IconButton>\n                        //             <NamesIcon className=\"nav-action-icon\"/>\n                        //         </IconButton>\n                        //     </NavLink>\n                        //     :\n                        //     <span></span>\n                        user ?\n                            user.profiles[0].id === 2 ?\n                                <NavLink to={appConstants.userPageRoute}>\n                                    <IconButton>\n                                        <NamesIcon className=\"nav-action-icon\"/>\n                                    </IconButton>\n                                </NavLink> :\n                                <NavLink to={appConstants.adminPageRoute}>\n                                    <IconButton>\n                                        <NamesIcon className=\"nav-action-icon\"/>\n                                    </IconButton>\n                                </NavLink>\n\n                            :\n                            <a></a>\n\n                    }\n                </div>\n            </Toolbar>\n        </AppBar>\n    );\n};\nexport default Header;"]},"metadata":{},"sourceType":"module"}