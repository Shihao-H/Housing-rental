{"ast":null,"code":"import { appConstants } from \"../constants/constant\";\nexport const login = (user, success, failure) => {\n  // we can use a library called qs   qs.stringify(user) to get a urlencoded form data\n  const userFormData = new FormData();\n  userFormData.append('username', user.username);\n  userFormData.append('password', user.password); // ES6 fetch API, async, await\n\n  const loginPromise = fetch(`${appConstants.API}/login`, {\n    method: 'POST',\n    body: userFormData,\n    credentials: 'include'\n  }).then(res => res.json()).then(res => {\n    res.success ? // check success is a function\n    typeof success === 'function' && success() : typeof failure === 'function' && failure();\n    return res;\n  }).catch(err => {\n    typeof failure === 'function' && failure(err);\n    return err;\n  });\n  return {\n    type: appConstants.LOGIN,\n    payload: loginPromise\n  };\n};","map":{"version":3,"sources":["/Users/shihaohuang/Documents/Mercury/community-management/client/src/actions/auth.action.js"],"names":["appConstants","login","user","success","failure","userFormData","FormData","append","username","password","loginPromise","fetch","API","method","body","credentials","then","res","json","catch","err","type","LOGIN","payload"],"mappings":"AAAA,SAAQA,YAAR,QAA2B,uBAA3B;AAKA,OAAO,MAAMC,KAAK,GAAG,CAACC,IAAD,EAAOC,OAAP,EAAgBC,OAAhB,KAA4B;AAC7C;AACA,QAAMC,YAAY,GAAG,IAAIC,QAAJ,EAArB;AACAD,EAAAA,YAAY,CAACE,MAAb,CAAoB,UAApB,EAAgCL,IAAI,CAACM,QAArC;AACAH,EAAAA,YAAY,CAACE,MAAb,CAAoB,UAApB,EAAgCL,IAAI,CAACO,QAArC,EAJ6C,CAK7C;;AACA,QAAMC,YAAY,GAAGC,KAAK,CACrB,GAAEX,YAAY,CAACY,GAAI,QADE,EAEtB;AACIC,IAAAA,MAAM,EAAE,MADZ;AAEIC,IAAAA,IAAI,EAAET,YAFV;AAGIU,IAAAA,WAAW,EAAE;AAHjB,GAFsB,CAAL,CAQZC,IARY,CAQPC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARA,EASZF,IATY,CASPC,GAAG,IAAI;AACTA,IAAAA,GAAG,CAACd,OAAJ,GACI;AACA,WAAOA,OAAP,KAAmB,UAAnB,IAAiCA,OAAO,EAF5C,GAGI,OAAOC,OAAP,KAAmB,UAAnB,IAAiCA,OAAO,EAH5C;AAIA,WAAOa,GAAP;AACH,GAfY,EAgBZE,KAhBY,CAgBNC,GAAG,IAAI;AACV,WAAOhB,OAAP,KAAmB,UAAnB,IAAiCA,OAAO,CAACgB,GAAD,CAAxC;AACA,WAAOA,GAAP;AACH,GAnBY,CAArB;AAqBA,SAAO;AACHC,IAAAA,IAAI,EAAErB,YAAY,CAACsB,KADhB;AAEHC,IAAAA,OAAO,EAAEb;AAFN,GAAP;AAIH,CA/BM","sourcesContent":["import {appConstants} from \"../constants/constant\";\n\n\n\n\nexport const login = (user, success, failure) => {\n    // we can use a library called qs   qs.stringify(user) to get a urlencoded form data\n    const userFormData = new FormData();\n    userFormData.append('username', user.username);\n    userFormData.append('password', user.password);\n    // ES6 fetch API, async, await\n    const loginPromise = fetch(\n        `${appConstants.API}/login`,\n        {\n            method: 'POST',\n            body: userFormData,\n            credentials: 'include'\n        }\n        )\n            .then(res => res.json())\n            .then(res => {\n                res.success ?\n                    // check success is a function\n                    typeof success === 'function' && success() :\n                    typeof failure === 'function' && failure();\n                return res;\n            })\n            .catch(err => {\n                typeof failure === 'function' && failure(err);\n                return err;\n            })\n    ;\n    return {\n        type: appConstants.LOGIN,\n        payload: loginPromise\n    };\n};\n\n"]},"metadata":{},"sourceType":"module"}