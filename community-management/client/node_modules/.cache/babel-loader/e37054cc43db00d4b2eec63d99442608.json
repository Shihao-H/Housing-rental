{"ast":null,"code":"import _classCallCheck from\"/Users/shihaohuang/Documents/Mercury/community-management/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/shihaohuang/Documents/Mercury/community-management/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/shihaohuang/Documents/Mercury/community-management/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/shihaohuang/Documents/Mercury/community-management/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Component}from\"react\";import{GoogleApiWrapper,Map,Marker}from\"google-maps-react\";import React from\"react\";import'./Locations.scss';import FormLabel from\"@material-ui/core/FormLabel/FormLabel\";import FormControlLabel from\"@material-ui/core/FormControlLabel/FormControlLabel\";import FormControl from\"@material-ui/core/FormControl/FormControl\";import RadioGroup from\"@material-ui/core/RadioGroup/RadioGroup\";import Radio from\"@material-ui/core/Radio/Radio\";var Locations=/*#__PURE__*/function(_Component){_inherits(Locations,_Component);var _super=_createSuper(Locations);function Locations(props){var _this;_classCallCheck(this,Locations);_this=_super.call(this,props);_this.setMapOnAll=function(map){for(var i=0;i<_this.markers.length;i++){_this.markers[i].setMap(map);}};_this.clearMarkers=function(){_this.setMapOnAll(null);};_this.deleteMarkers=function(){_this.clearMarkers();_this.markers=[];};_this.fetchPlaces=function(value){// console.log(this.tRef.current);\nvar google=_this.tRef.current.props.google;var map=_this.tRef.current.map;var bounds=new google.maps.LatLngBounds();var infoWindow=new google.maps.InfoWindow();var currentInfoWindow=infoWindow;var service=new google.maps.places.PlacesService(map);var infoPane=document.getElementById('panel');var request={location:{lat:40.33,lng:-74.57},rankBy:_this.props.google.maps.places.RankBy.DISTANCE,// keyword: isNull ? 'hotel':this.state.keyword\n// keyword: this.state.keyword\nkeyword:value};var temp=new Promise(function(resolve,reject){console.log('This is the begining');_this.deleteMarkers();_this.results=[];service.nearbySearch(request,function(results,status){if(status==google.maps.places.PlacesServiceStatus.OK){console.log(status);results.forEach(function(place){var marker=new google.maps.Marker({position:place.geometry.location,map:map,title:place.name});_this.markers.push(marker);_this.results.push(place);// Adjust the map bounds to include the location of this marker\nbounds.extend(place.geometry.location);});/* Once all the markers have been placed, adjust the bounds of the map to\n                             * show all the markers within the visible area. */map.fitBounds(bounds);console.log('+++++++++++++++');// this.setMarkers(markers);\nconsole.log(_this.results);console.log(_this.markers);console.log('+++++++++++++++');}else{console.log(\"doesn't work\");}});resolve('Finished');});var temp2=function temp2(){console.log('.....................');_this.results.forEach(function(place,index){console.log('@@@@@@@@@@@@@@');var marker=_this.markers[index];google.maps.event.addListener(marker,'click',function(){var request={placeId:place.place_id,fields:['name','formatted_address','geometry','rating','website','photos']};/* Only fetch the details of a place when the user clicks on a marker.\n                         * If we fetch the details for all place results as soon as we get\n                         * the search response, we will hit API rate limits. */service.getDetails(request,function(placeResult,status){if(status==google.maps.places.PlacesServiceStatus.OK){var placeInfowindow=new google.maps.InfoWindow();var rating=\"None\";if(placeResult.rating)rating=placeResult.rating;placeInfowindow.setContent('<div><strong>'+placeResult.name+'</strong><br>'+'Rating: '+rating+'</div>');placeInfowindow.open(marker.map,marker);currentInfoWindow.close();currentInfoWindow=placeInfowindow;console.log(\"reach here\");// showPanel(placeResult);\nif(infoPane.classList.contains(\"open\")){infoPane.classList.remove(\"open\");}// Clear the previous details\nwhile(infoPane.lastChild){infoPane.removeChild(infoPane.lastChild);}/* TODO: Step 4E: Display a Place Photo with the Place Details */ // Add the primary photo, if there is one\nif(placeResult.photos){var firstPhoto=placeResult.photos[0];console.log(firstPhoto);var photo=document.createElement('img');photo.classList.add('hero');photo.src=firstPhoto.getUrl();photo.width=300;photo.height=150;infoPane.appendChild(photo);}// Add place details with text formatting\nvar name=document.createElement('h1');name.classList.add('place');name.textContent=placeResult.name;infoPane.appendChild(name);if(placeResult.rating){var _rating=document.createElement('p');_rating.classList.add('details');_rating.textContent=\"Rating: \".concat(placeResult.rating,\" \\u272E\");infoPane.appendChild(_rating);}var address=document.createElement('p');address.classList.add('details');address.textContent=placeResult.formatted_address;infoPane.appendChild(address);if(placeResult.website){var websitePara=document.createElement('p');var websiteLink=document.createElement('a');var websiteUrl=document.createTextNode(placeResult.website);websiteLink.appendChild(websiteUrl);websiteLink.title=placeResult.website;websiteLink.href=placeResult.website;websitePara.appendChild(websiteLink);infoPane.appendChild(websitePara);}// Open the infoPane\ninfoPane.classList.add(\"open\");}else{console.log('showDetails failed: '+status);}// showDetails(placeResult, marker, status)\n});});});};temp.then(function(res){var myInterval=setInterval(function(){if(_this.results.length>0){setTimeout(function(){console.log('clear interval...');clearInterval(myInterval);temp2();},105);}},100);});};_this.handleChange=function(event){_this.setState({value:event.target.value});_this.fetchPlaces(event.target.value);};_this.state={value:''};_this.tRef=React.createRef();_this.markers=[];_this.results=[];return _this;}_createClass(Locations,[{key:\"showMap\",value:function showMap(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Map// style={{width: '30%', height: 600, position: 'relative'}}\n,{style:{width:'53%',height:600,display:'flex',flexFlow:'row nowrap'},ref:this.tRef,google:this.props.google// onReady={(mapProps,map) => this.fetchPlaces(mapProps, map)}\n,zoom:16,initialCenter:{lat:40.33,lng:-74.57},visible:true},/*#__PURE__*/React.createElement(Marker,{lat:40.33,lng:-74.57,name:\"Center\",color:\"blue\",icon:\"http://maps.google.com/mapfiles/ms/icons/blue.png\"})));}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"useless\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"left\"},/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\"},/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\"},\"Places nearby\"),/*#__PURE__*/React.createElement(RadioGroup,{\"aria-label\":\"filters\",name:\"gender1\",value:this.state.value,onChange:this.handleChange},/*#__PURE__*/React.createElement(FormControlLabel,{value:\"airport\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Airport\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"bus station\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Bus Station\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"cafe\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Cafe\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"convenience store\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Convenience Store\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"department store\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Department Store\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"gas station\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Gas Station\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"gym\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Gym\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"hardware store\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Hardware Store\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"laundry\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Laundry\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"movie theater\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Movie Theater\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"park\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Park\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"restaurant\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Restaurant\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"school\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"School\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"hotel\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Hotel\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"supermarket\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Supermarket\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"transit station\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Transit Station\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"middle\"},this.showMap()),/*#__PURE__*/React.createElement(\"div\",{className:\"middleUseless\"}),/*#__PURE__*/React.createElement(\"div\",{id:\"panel\",className:\"right\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"rightUseless\"})));}}]);return Locations;}(Component);export default GoogleApiWrapper({apiKey:\"AIzaSyCD_NjwMKIxeMBW5-KhgH2cntfYZdTc2A0\"})(Locations);","map":{"version":3,"sources":["/Users/shihaohuang/Documents/Mercury/community-management/client/src/navbar/Location/Locations.js"],"names":["Component","GoogleApiWrapper","Map","Marker","React","FormLabel","FormControlLabel","FormControl","RadioGroup","Radio","Locations","props","setMapOnAll","map","i","markers","length","setMap","clearMarkers","deleteMarkers","fetchPlaces","value","google","tRef","current","bounds","maps","LatLngBounds","infoWindow","InfoWindow","currentInfoWindow","service","places","PlacesService","infoPane","document","getElementById","request","location","lat","lng","rankBy","RankBy","DISTANCE","keyword","temp","Promise","resolve","reject","console","log","results","nearbySearch","status","PlacesServiceStatus","OK","forEach","place","marker","position","geometry","title","name","push","extend","fitBounds","temp2","index","event","addListener","placeId","place_id","fields","getDetails","placeResult","placeInfowindow","rating","setContent","open","close","classList","contains","remove","lastChild","removeChild","photos","firstPhoto","photo","createElement","add","src","getUrl","width","height","appendChild","textContent","address","formatted_address","website","websitePara","websiteLink","websiteUrl","createTextNode","href","then","res","myInterval","setInterval","setTimeout","clearInterval","handleChange","setState","target","state","createRef","display","flexFlow","showMap","apiKey"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\nimport {GoogleApiWrapper, Map, Marker} from \"google-maps-react\";\nimport React from \"react\";\nimport './Locations.scss';\nimport FormLabel from \"@material-ui/core/FormLabel/FormLabel\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl/FormControl\";\nimport RadioGroup from \"@material-ui/core/RadioGroup/RadioGroup\";\nimport Radio from \"@material-ui/core/Radio/Radio\";\n\nclass Locations extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            value: '',\n        };\n        this.tRef = React.createRef();\n        this.markers = [];\n        this.results = [];\n    }\n\n\n    setMapOnAll = (map) => {\n        for (let i = 0; i < this.markers.length; i++) {\n            this.markers[i].setMap(map);\n        }\n    }\n\n    // Removes the markers from the map, but keeps them in the array.\n    clearMarkers = () => {\n        this.setMapOnAll(null);\n    }\n\n\n    // Deletes all markers in the array by removing references to them.\n    deleteMarkers = () => {\n        this.clearMarkers();\n        this.markers = [];\n    }\n\n\n\n\n    fetchPlaces = (value) => {\n\n\n        // console.log(this.tRef.current);\n        const {google} = this.tRef.current.props;\n\n        let map = this.tRef.current.map;\n\n        const bounds = new google.maps.LatLngBounds();\n        const infoWindow = new google.maps.InfoWindow;\n        let currentInfoWindow = infoWindow;\n        const service = new google.maps.places.PlacesService(map);\n        let infoPane = document.getElementById('panel');\n\n        let request = {\n            location: {\n                lat: 40.33, lng: -74.57\n            },\n            rankBy: this.props.google.maps.places.RankBy.DISTANCE,\n\n            // keyword: isNull ? 'hotel':this.state.keyword\n            // keyword: this.state.keyword\n            keyword: value\n        };\n\n\n\n           let temp = new Promise((resolve, reject) =>\n            {\n                console.log('This is the begining');\n\n                    this.deleteMarkers();\n                    this.results=[];\n                    service.nearbySearch(request, (results, status) => {\n                        if (status == google.maps.places.PlacesServiceStatus.OK) {\n\n                            console.log(status);\n                            results.forEach(place => {\n                                let marker = new google.maps.Marker({\n                                    position: place.geometry.location,\n                                    map: map,\n                                    title: place.name\n                                });\n\n                                this.markers.push(marker);\n                                this.results.push(place);\n\n\n                                // Adjust the map bounds to include the location of this marker\n                                bounds.extend(place.geometry.location);\n                            });\n\n\n                            /* Once all the markers have been placed, adjust the bounds of the map to\n                             * show all the markers within the visible area. */\n                            map.fitBounds(bounds);\n                            console.log('+++++++++++++++');\n                            // this.setMarkers(markers);\n                            console.log(this.results);\n                            console.log(this.markers);\n                            console.log('+++++++++++++++');\n\n                        }\n                        else {\n                            console.log(\"doesn't work\");\n                        }\n\n\n                    });\n\n\n                    resolve('Finished');\n            });\n\n\n\n\n\n\n        const temp2 = () => {\n\n            console.log('.....................');\n\n                this.results.forEach((place, index) => {\n\n                    console.log('@@@@@@@@@@@@@@');\n\n\n                    let marker = this.markers[index];\n                    google.maps.event.addListener(marker, 'click', () => {\n                        let request = {\n                            placeId: place.place_id,\n                            fields: ['name', 'formatted_address', 'geometry', 'rating',\n                                'website', 'photos']\n                        };\n\n                        /* Only fetch the details of a place when the user clicks on a marker.\n                         * If we fetch the details for all place results as soon as we get\n                         * the search response, we will hit API rate limits. */\n                        service.getDetails(request, (placeResult, status) => {\n                            if (status == google.maps.places.PlacesServiceStatus.OK) {\n                                let placeInfowindow = new google.maps.InfoWindow();\n                                let rating = \"None\";\n                                if (placeResult.rating) rating = placeResult.rating;\n                                placeInfowindow.setContent('<div><strong>' + placeResult.name +\n                                    '</strong><br>' + 'Rating: ' + rating + '</div>');\n                                placeInfowindow.open(marker.map, marker);\n                                currentInfoWindow.close();\n                                currentInfoWindow = placeInfowindow;\n                                console.log(\"reach here\");\n                                // showPanel(placeResult);\n\n                                if (infoPane.classList.contains(\"open\")) {\n                                    infoPane.classList.remove(\"open\");\n                                }\n\n                                // Clear the previous details\n                                while (infoPane.lastChild) {\n                                    infoPane.removeChild(infoPane.lastChild);\n                                }\n\n                                /* TODO: Step 4E: Display a Place Photo with the Place Details */\n                                // Add the primary photo, if there is one\n                                if (placeResult.photos) {\n                                    let firstPhoto = placeResult.photos[0];\n\n                                    console.log(firstPhoto);\n\n\n                                    let photo = document.createElement('img');\n                                    photo.classList.add('hero');\n                                    photo.src = firstPhoto.getUrl();\n                                    photo.width = 300;\n                                    photo.height = 150;\n                                    infoPane.appendChild(photo);\n                                }\n\n                                // Add place details with text formatting\n                                let name = document.createElement('h1');\n                                name.classList.add('place');\n                                name.textContent = placeResult.name;\n                                infoPane.appendChild(name);\n\n                                if (placeResult.rating) {\n                                    let rating = document.createElement('p');\n                                    rating.classList.add('details');\n                                    rating.textContent = `Rating: ${placeResult.rating} \\u272e`;\n                                    infoPane.appendChild(rating);\n                                }\n\n                                let address = document.createElement('p');\n                                address.classList.add('details');\n                                address.textContent = placeResult.formatted_address;\n                                infoPane.appendChild(address);\n                                if (placeResult.website) {\n                                    let websitePara = document.createElement('p');\n                                    let websiteLink = document.createElement('a');\n                                    let websiteUrl = document.createTextNode(placeResult.website);\n                                    websiteLink.appendChild(websiteUrl);\n                                    websiteLink.title = placeResult.website;\n                                    websiteLink.href = placeResult.website;\n                                    websitePara.appendChild(websiteLink);\n                                    infoPane.appendChild(websitePara);\n                                }\n\n                                // Open the infoPane\n                                infoPane.classList.add(\"open\");\n\n\n                            }\n                            else {\n                                console.log('showDetails failed: ' + status);\n                            }\n\n\n                            // showDetails(placeResult, marker, status)\n                        })\n                    })\n\n                });\n\n\n        }\n\n\n\n        temp.then(\n            (res) => {\n\n                let myInterval = setInterval(() => {\n                    if(this.results.length > 0)\n                    {\n\n                        setTimeout(() => {\n                            console.log('clear interval...');\n                            clearInterval(myInterval);\n                            temp2();\n                        }, 105);\n\n\n                    }\n                }, 100);\n\n            }\n        );\n\n\n    }\n\n    handleChange = (event) => {\n        this.setState({value: event.target.value});\n        this.fetchPlaces(event.target.value);\n    };\n\n\n    showMap() {\n\n        return (\n            <>\n                <Map\n                    // style={{width: '30%', height: 600, position: 'relative'}}\n                    style={{width: '53%', height: 600, display:'flex', flexFlow: 'row nowrap'}}\n                    ref = {this.tRef}\n                    google={this.props.google}\n                    // onReady={(mapProps,map) => this.fetchPlaces(mapProps, map)}\n\n                    zoom={16}\n                    initialCenter={{\n                        lat: 40.33, lng: -74.57\n                    }}\n                    visible={true}\n                >\n\n                    <Marker\n                        lat={40.33}\n                        lng={-74.57}\n                        name='Center'\n                        color=\"blue\"\n                        icon={\"http://maps.google.com/mapfiles/ms/icons/blue.png\"}\n                    />\n                </Map>\n            </>\n        );\n    }\n\n\n\n\n    render() {\n        return (\n            <div>\n                <br/>\n                <br/>\n                <br/>\n                <div className=\"content\">\n                    <div className=\"useless\"/>\n                    <div className=\"left\">\n                        <FormControl component=\"fieldset\">\n                            <FormLabel component=\"legend\">Places nearby</FormLabel>\n                            <RadioGroup aria-label=\"filters\" name=\"gender1\" value={this.state.value} onChange={this.handleChange}>\n                                <FormControlLabel value=\"airport\" control={<Radio />} label=\"Airport\" />\n                                <FormControlLabel value=\"bus station\" control={<Radio />} label=\"Bus Station\" />\n                                <FormControlLabel value=\"cafe\" control={<Radio />} label=\"Cafe\" />\n                                <FormControlLabel value=\"convenience store\" control={<Radio />} label=\"Convenience Store\" />\n                                <FormControlLabel value=\"department store\" control={<Radio />} label=\"Department Store\" />\n                                <FormControlLabel value=\"gas station\" control={<Radio />} label=\"Gas Station\" />\n                                <FormControlLabel value=\"gym\" control={<Radio />} label=\"Gym\" />\n                                <FormControlLabel value=\"hardware store\" control={<Radio />} label=\"Hardware Store\" />\n                                <FormControlLabel value=\"laundry\" control={<Radio />} label=\"Laundry\" />\n                                <FormControlLabel value=\"movie theater\" control={<Radio />} label=\"Movie Theater\" />\n                                <FormControlLabel value=\"park\" control={<Radio />} label=\"Park\" />\n                                <FormControlLabel value=\"restaurant\" control={<Radio />} label=\"Restaurant\" />\n                                <FormControlLabel value=\"school\" control={<Radio />} label=\"School\" />\n                                <FormControlLabel value=\"hotel\" control={<Radio />} label=\"Hotel\" />\n                                <FormControlLabel value=\"supermarket\" control={<Radio />} label=\"Supermarket\" />\n                                <FormControlLabel value=\"transit station\" control={<Radio />} label=\"Transit Station\" />\n                            </RadioGroup>\n                        </FormControl>\n                    </div>\n                    <div className=\"middle\">\n                        {this.showMap()}\n                    </div>\n                    <div className=\"middleUseless\"/>\n                    <div id=\"panel\" className=\"right\"/>\n                    <div className=\"rightUseless\"/>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport default GoogleApiWrapper({\n    apiKey: (\"AIzaSyCD_NjwMKIxeMBW5-KhgH2cntfYZdTc2A0\")\n})(Locations)\n\n"]},"metadata":{},"sourceType":"module"}