{"ast":null,"code":"var _jsxFileName = \"/Users/shihaohuang/Documents/Mercury/community-management/client/src/navbar/Locations.js\";\nimport React, { Component } from 'react';\nimport { Card, CardBody } from 'reactstrap';\nimport { GoogleApiWrapper, InfoWindow, Map, Marker } from \"google-maps-react\"; // import { compose, withState, withProps, withStateHandlers, lifecycle } from 'recompose';\n// import { withScriptjs, withGoogleMap, GoogleMap, InfoWindow} from 'react-google-maps';\n\nlet pos;\nlet map;\nlet bounds;\nlet infoWindow;\nlet currentInfoWindow;\nlet service;\nlet infoPane; // Handle the results (up to 20) of the Nearby Search\n\nfunction nearbyCallback(results, status) {\n  if (status == google.maps.places.PlacesServiceStatus.OK) {\n    createMarkers(results);\n  }\n}\n\nfunction initMap() {\n  // Initialize variables\n  bounds = new google.maps.LatLngBounds();\n  infoWindow = new google.maps.InfoWindow();\n  currentInfoWindow = infoWindow;\n  /* TODO: Step 4A3: Add a generic sidebar */\n\n  infoPane = document.getElementById('panel'); // Try HTML5 geolocation\n\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(position => {\n      pos = {\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      };\n      map = new google.maps.Map(document.getElementById('map'), {\n        center: pos,\n        zoom: 15\n      });\n      bounds.extend(pos);\n      infoWindow.setPosition(pos);\n      infoWindow.setContent('Location found.');\n      infoWindow.open(map);\n      map.setCenter(pos); // Call Places Nearby Search on user's location\n\n      getNearbyPlaces(pos);\n    }, () => {\n      // Browser supports geolocation, but user has denied permission\n      handleLocationError(true, infoWindow);\n    });\n  } else {\n    // Browser doesn't support geolocation\n    handleLocationError(false, infoWindow);\n  }\n} // Handle a geolocation error\n\n\nfunction handleLocationError(browserHasGeolocation, infoWindow) {\n  // Set default location to Sydney, Australia\n  pos = {\n    lat: -33.856,\n    lng: 151.215\n  };\n  map = new google.maps.Map(document.getElementById('map'), {\n    center: pos,\n    zoom: 15\n  }); // Display an InfoWindow at the map center\n\n  infoWindow.setPosition(pos);\n  infoWindow.setContent(browserHasGeolocation ? 'Geolocation permissions denied. Using default location.' : 'Error: Your browser doesn\\'t support geolocation.');\n  infoWindow.open(map);\n  currentInfoWindow = infoWindow; // Call Places Nearby Search on the default location\n\n  getNearbyPlaces(pos);\n} // Set markers at the location of each place result\n\n\nfunction createMarkers(places) {\n  places.forEach(place => {\n    let marker = new google.maps.Marker({\n      position: place.geometry.location,\n      map: map,\n      title: place.name\n    });\n    /* TODO: Step 4B: Add click listeners to the markers */\n    // Add click listener to each marker\n\n    google.maps.event.addListener(marker, 'click', () => {\n      let request = {\n        placeId: place.place_id,\n        fields: ['name', 'formatted_address', 'geometry', 'rating', 'website', 'photos']\n      };\n      /* Only fetch the details of a place when the user clicks on a marker.\n       * If we fetch the details for all place results as soon as we get\n       * the search response, we will hit API rate limits. */\n\n      service.getDetails(request, (placeResult, status) => {\n        showDetails(placeResult, marker, status);\n      });\n    }); // Adjust the map bounds to include the location of this marker\n\n    bounds.extend(place.geometry.location);\n  });\n  /* Once all the markers have been placed, adjust the bounds of the map to\n   * show all the markers within the visible area. */\n\n  map.fitBounds(bounds);\n} // Perform a Places Nearby Search Request\n\n\nfunction getNearbyPlaces(position) {\n  let request = {\n    location: position,\n    rankBy: google.maps.places.RankBy.DISTANCE,\n    // keyword: 'sushi'\n    keyword: 'hotel'\n  };\n  service = new window.google.maps.places.PlacesService(map);\n  service.nearbySearch(request, nearbyCallback);\n}\n/* TODO: Step 4C: Show place details in an info window */\n// Builds an InfoWindow to display details above the marker\n\n\nfunction showDetails(placeResult, marker, status) {\n  if (status == window.google.maps.places.PlacesServiceStatus.OK) {\n    let placeInfowindow = new google.maps.InfoWindow();\n    let rating = \"None\";\n    if (placeResult.rating) rating = placeResult.rating;\n    placeInfowindow.setContent('<div><strong>' + placeResult.name + '</strong><br>' + 'Rating: ' + rating + '</div>');\n    placeInfowindow.open(marker.map, marker);\n    currentInfoWindow.close();\n    currentInfoWindow = placeInfowindow;\n    showPanel(placeResult);\n  } else {\n    console.log('showDetails failed: ' + status);\n  }\n}\n/* TODO: Step 4D: Load place details in a sidebar */\n// Displays place details in a sidebar\n\n\nfunction showPanel(placeResult) {\n  // If infoPane is already open, close it\n  if (infoPane.classList.contains(\"open\")) {\n    infoPane.classList.remove(\"open\");\n  } // Clear the previous details\n\n\n  while (infoPane.lastChild) {\n    infoPane.removeChild(infoPane.lastChild);\n  }\n  /* TODO: Step 4E: Display a Place Photo with the Place Details */\n  // Add the primary photo, if there is one\n\n\n  if (placeResult.photos) {\n    let firstPhoto = placeResult.photos[0];\n    let photo = document.createElement('img');\n    photo.classList.add('hero');\n    photo.src = firstPhoto.getUrl();\n    infoPane.appendChild(photo);\n  } // Add place details with text formatting\n\n\n  let name = document.createElement('h1');\n  name.classList.add('place');\n  name.textContent = placeResult.name;\n  infoPane.appendChild(name);\n\n  if (placeResult.rating) {\n    let rating = document.createElement('p');\n    rating.classList.add('details');\n    rating.textContent = `Rating: ${placeResult.rating} \\u272e`;\n    infoPane.appendChild(rating);\n  }\n\n  let address = document.createElement('p');\n  address.classList.add('details');\n  address.textContent = placeResult.formatted_address;\n  infoPane.appendChild(address);\n\n  if (placeResult.website) {\n    let websitePara = document.createElement('p');\n    let websiteLink = document.createElement('a');\n    let websiteUrl = document.createTextNode(placeResult.website);\n    websiteLink.appendChild(websiteUrl);\n    websiteLink.title = placeResult.website;\n    websiteLink.href = placeResult.website;\n    websitePara.appendChild(websiteLink);\n    infoPane.appendChild(websitePara);\n  } // Open the infoPane\n\n\n  infoPane.classList.add(\"open\");\n}\n\nclass Locations extends Component {\n  render() {\n    return (\n      /*#__PURE__*/\n      // Important! Always set the container height explicitly\n      React.createElement(\"div\", {\n        className: 'text-center',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: \"10\",\n          height: \"512\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Map, {\n        style: {\n          width: \"95%\",\n          height: \"515\",\n          display: 'flex',\n          flexFlow: 'row nowrap'\n        },\n        google: this.props.google,\n        zoom: 16,\n        initialCenter: {\n          lat: 40.33,\n          lng: -74.57\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Marker, {\n        position: {\n          lat: 40.33,\n          lng: -74.57\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 37\n        }\n      }))))\n    );\n  }\n\n} // export default Locations;\n\n\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyCD_NjwMKIxeMBW5-KhgH2cntfYZdTc2A0\"\n})(Locations);\n{\n  /*<GoogleMapReact*/\n}\n{\n  /*bootstrapURLKeys={{ key: \"AIzaSyCD_NjwMKIxeMBW5-KhgH2cntfYZdTc2A0\" }}*/\n}\n{\n  /*defaultCenter={this.props.center}*/\n}\n{\n  /*defaultZoom={this.props.zoom}*/\n}\n{\n  /*>*/\n}\n{\n  /*</GoogleMapReact>*/\n}","map":{"version":3,"sources":["/Users/shihaohuang/Documents/Mercury/community-management/client/src/navbar/Locations.js"],"names":["React","Component","Card","CardBody","GoogleApiWrapper","InfoWindow","Map","Marker","pos","map","bounds","infoWindow","currentInfoWindow","service","infoPane","nearbyCallback","results","status","google","maps","places","PlacesServiceStatus","OK","createMarkers","initMap","LatLngBounds","document","getElementById","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","center","zoom","extend","setPosition","setContent","open","setCenter","getNearbyPlaces","handleLocationError","browserHasGeolocation","forEach","place","marker","geometry","location","title","name","event","addListener","request","placeId","place_id","fields","getDetails","placeResult","showDetails","fitBounds","rankBy","RankBy","DISTANCE","keyword","window","PlacesService","nearbySearch","placeInfowindow","rating","close","showPanel","console","log","classList","contains","remove","lastChild","removeChild","photos","firstPhoto","photo","createElement","add","src","getUrl","appendChild","textContent","address","formatted_address","website","websitePara","websiteLink","websiteUrl","createTextNode","href","Locations","render","width","height","display","flexFlow","props","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Card, CardBody} from 'reactstrap';\nimport {GoogleApiWrapper, InfoWindow, Map, Marker} from \"google-maps-react\";\n// import { compose, withState, withProps, withStateHandlers, lifecycle } from 'recompose';\n// import { withScriptjs, withGoogleMap, GoogleMap, InfoWindow} from 'react-google-maps';\n\nlet pos;\nlet map;\nlet bounds;\nlet infoWindow;\nlet currentInfoWindow;\nlet service;\nlet infoPane;\n\n\n\n// Handle the results (up to 20) of the Nearby Search\n function nearbyCallback(results, status) {\n     if (status == google.maps.places.PlacesServiceStatus.OK) {\n        createMarkers(results);\n    }\n}\n\nfunction initMap() {\n    // Initialize variables\n    bounds = new google.maps.LatLngBounds();\n    infoWindow = new google.maps.InfoWindow;\n    currentInfoWindow = infoWindow;\n    /* TODO: Step 4A3: Add a generic sidebar */\n    infoPane = document.getElementById('panel');\n\n    // Try HTML5 geolocation\n    if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(position => {\n            pos = {\n                lat: position.coords.latitude,\n                lng: position.coords.longitude\n            };\n            map = new google.maps.Map(document.getElementById('map'), {\n                center: pos,\n                zoom: 15\n            });\n            bounds.extend(pos);\n\n            infoWindow.setPosition(pos);\n            infoWindow.setContent('Location found.');\n            infoWindow.open(map);\n            map.setCenter(pos);\n\n            // Call Places Nearby Search on user's location\n            getNearbyPlaces(pos);\n        }, () => {\n            // Browser supports geolocation, but user has denied permission\n            handleLocationError(true, infoWindow);\n        });\n    } else {\n        // Browser doesn't support geolocation\n        handleLocationError(false, infoWindow);\n    }\n}\n\n// Handle a geolocation error\nfunction handleLocationError(browserHasGeolocation, infoWindow) {\n    // Set default location to Sydney, Australia\n    pos = { lat: -33.856, lng: 151.215 };\n    map = new google.maps.Map(document.getElementById('map'), {\n        center: pos,\n        zoom: 15\n    });\n\n    // Display an InfoWindow at the map center\n    infoWindow.setPosition(pos);\n    infoWindow.setContent(browserHasGeolocation ?\n        'Geolocation permissions denied. Using default location.' :\n        'Error: Your browser doesn\\'t support geolocation.');\n    infoWindow.open(map);\n    currentInfoWindow = infoWindow;\n\n    // Call Places Nearby Search on the default location\n    getNearbyPlaces(pos);\n}\n\n\n\n\n// Set markers at the location of each place result\n function createMarkers(places) {\n    places.forEach(place => {\n        let marker = new google.maps.Marker({\n            position: place.geometry.location,\n            map: map,\n            title: place.name\n        });\n\n        /* TODO: Step 4B: Add click listeners to the markers */\n        // Add click listener to each marker\n        google.maps.event.addListener(marker, 'click', () => {\n            let request = {\n                placeId: place.place_id,\n                fields: ['name', 'formatted_address', 'geometry', 'rating',\n                    'website', 'photos']\n            };\n\n            /* Only fetch the details of a place when the user clicks on a marker.\n             * If we fetch the details for all place results as soon as we get\n             * the search response, we will hit API rate limits. */\n            service.getDetails(request, (placeResult, status) => {\n                showDetails(placeResult, marker, status)\n            });\n        });\n\n        // Adjust the map bounds to include the location of this marker\n        bounds.extend(place.geometry.location);\n    });\n    /* Once all the markers have been placed, adjust the bounds of the map to\n     * show all the markers within the visible area. */\n    map.fitBounds(bounds);\n}\n\n\n// Perform a Places Nearby Search Request\nfunction getNearbyPlaces(position) {\n    let request = {\n        location: position,\n        rankBy: google.maps.places.RankBy.DISTANCE,\n        // keyword: 'sushi'\n\n        keyword: 'hotel'\n    };\n\n    service = new window.google.maps.places.PlacesService(map);\n    service.nearbySearch(request, nearbyCallback);\n}\n\n\n/* TODO: Step 4C: Show place details in an info window */\n// Builds an InfoWindow to display details above the marker\nfunction showDetails(placeResult, marker, status) {\n    if (status == window.google.maps.places.PlacesServiceStatus.OK) {\n        let placeInfowindow = new google.maps.InfoWindow();\n        let rating = \"None\";\n        if (placeResult.rating) rating = placeResult.rating;\n        placeInfowindow.setContent('<div><strong>' + placeResult.name +\n            '</strong><br>' + 'Rating: ' + rating + '</div>');\n        placeInfowindow.open(marker.map, marker);\n        currentInfoWindow.close();\n        currentInfoWindow = placeInfowindow;\n        showPanel(placeResult);\n    } else {\n        console.log('showDetails failed: ' + status);\n    }\n}\n\n\n\n/* TODO: Step 4D: Load place details in a sidebar */\n// Displays place details in a sidebar\nfunction showPanel(placeResult) {\n    // If infoPane is already open, close it\n    if (infoPane.classList.contains(\"open\")) {\n        infoPane.classList.remove(\"open\");\n    }\n\n    // Clear the previous details\n    while (infoPane.lastChild) {\n        infoPane.removeChild(infoPane.lastChild);\n    }\n\n    /* TODO: Step 4E: Display a Place Photo with the Place Details */\n    // Add the primary photo, if there is one\n    if (placeResult.photos) {\n        let firstPhoto = placeResult.photos[0];\n        let photo = document.createElement('img');\n        photo.classList.add('hero');\n        photo.src = firstPhoto.getUrl();\n        infoPane.appendChild(photo);\n    }\n\n    // Add place details with text formatting\n    let name = document.createElement('h1');\n    name.classList.add('place');\n    name.textContent = placeResult.name;\n    infoPane.appendChild(name);\n    if (placeResult.rating) {\n        let rating = document.createElement('p');\n        rating.classList.add('details');\n        rating.textContent = `Rating: ${placeResult.rating} \\u272e`;\n        infoPane.appendChild(rating);\n    }\n    let address = document.createElement('p');\n    address.classList.add('details');\n    address.textContent = placeResult.formatted_address;\n    infoPane.appendChild(address);\n    if (placeResult.website) {\n        let websitePara = document.createElement('p');\n        let websiteLink = document.createElement('a');\n        let websiteUrl = document.createTextNode(placeResult.website);\n        websiteLink.appendChild(websiteUrl);\n        websiteLink.title = placeResult.website;\n        websiteLink.href = placeResult.website;\n        websitePara.appendChild(websiteLink);\n        infoPane.appendChild(websitePara);\n    }\n\n    // Open the infoPane\n    infoPane.classList.add(\"open\");\n}\n\n\nclass Locations extends Component {\n\n\n    render() {\n        return (\n\n\n\n\n            // Important! Always set the container height explicitly\n                <div className={'text-center'}>\n                            <div style={{width: \"10\", height: \"512\"}}>\n                                <Map\n                                    style={{width: \"95%\", height: \"515\", display:'flex', flexFlow: 'row nowrap'}}\n                                    google={this.props.google} zoom={16}\n                                    initialCenter={{\n                                        lat: 40.33, lng: -74.57\n                                    }}>\n                                    <Marker position={{ lat: 40.33, lng: -74.57}} />\n                                </Map>\n                            </div>\n                </div>\n        );\n    }\n}\n\n// export default Locations;\n\nexport default GoogleApiWrapper({\n    apiKey: (\"AIzaSyCD_NjwMKIxeMBW5-KhgH2cntfYZdTc2A0\")\n})(Locations)\n\n{/*<GoogleMapReact*/}\n{/*bootstrapURLKeys={{ key: \"AIzaSyCD_NjwMKIxeMBW5-KhgH2cntfYZdTc2A0\" }}*/}\n{/*defaultCenter={this.props.center}*/}\n{/*defaultZoom={this.props.zoom}*/}\n{/*>*/}\n{/*</GoogleMapReact>*/}"]},"metadata":{},"sourceType":"module"}