{"ast":null,"code":"var _jsxFileName = \"/Users/shihaohuang/Documents/Mercury/community-management/client/src/MapContainer.js\";\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport { Component } from \"react\";\nimport React from \"react\";\n\nclass MapContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setKeyword = event => {\n      event.preventDefault();\n      console.log('setKeyword: ' + event.target.value);\n      this.setState({\n        keyword: 'restaurant'\n      });\n      this.forceUpdate();\n    };\n\n    this.state = {\n      keyword: ''\n    };\n    let bounds;\n    let infoWindow;\n    let currentInfoWindow;\n    let service;\n    let infoPane;\n  } // state = {\n  //     showingInfoWindow: false,\n  //     activeMarker: {},\n  //     selectedPlace: {},\n  // };\n  //\n  // onMarkerClick = (props, marker, e) =>\n  //     this.setState({\n  //         selectedPlace: props,\n  //         activeMarker: marker,\n  //         showingInfoWindow: true\n  //     });\n  //\n  // onMapClicked = (props) => {\n  //     if (this.state.showingInfoWindow) {\n  //         this.setState({\n  //             showingInfoWindow: false,\n  //             activeMarker: null\n  //         })\n  //     }\n  // };\n\n\n  fetchPlaces(mapProps, map) {\n    const {\n      google\n    } = mapProps; // const bounds = new google.maps.LatLngBounds();\n    // const infoWindow = new google.maps.InfoWindow;\n    // let currentInfoWindow = infoWindow;\n    // const service = new google.maps.places.PlacesService(map);\n    // let infoPane = document.getElementById('panel');\n\n    this.bounds = new google.maps.LatLngBounds();\n    this.infoWindow = new google.maps.InfoWindow();\n    this.currentInfoWindow = infoWindow;\n    this.service = new google.maps.places.PlacesService(map);\n    this.infoPane = document.getElementById('panel');\n    let isNull = false;\n\n    try {\n      console.log(this.state.keyword);\n      console.log('try');\n    } catch (err) {\n      isNull = true;\n      console.log('still null');\n    }\n\n    let request = {\n      location: {\n        lat: 40.33,\n        lng: -74.57\n      },\n      rankBy: google.maps.places.RankBy.DISTANCE,\n      // keyword: 'sushi'\n      keyword: isNull ? 'restaurant' : console.log(this.state.keyword)\n    };\n    console.log(this.service); // service.nearbySearch(request, this.nearbyCallback);\n\n    this.service.nearbySearch(request, function (results, status) {\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\n        console.log(status);\n        results.forEach(place => {\n          let marker = new google.maps.Marker({\n            position: place.geometry.location,\n            map: map,\n            title: place.name\n          }); //     /* TODO: Step 4B: Add click listeners to the markers */\n          // Add click listener to each marker\n\n          google.maps.event.addListener(marker, 'click', () => {\n            let request = {\n              placeId: place.place_id,\n              fields: ['name', 'formatted_address', 'geometry', 'rating', 'website', 'photos']\n            };\n            /* Only fetch the details of a place when the user clicks on a marker.\n             * If we fetch the details for all place results as soon as we get\n             * the search response, we will hit API rate limits. */\n\n            this.service.getDetails(request, (placeResult, status) => {\n              if (status == google.maps.places.PlacesServiceStatus.OK) {\n                let placeInfowindow = new google.maps.InfoWindow();\n                let rating = \"None\";\n                if (placeResult.rating) rating = placeResult.rating;\n                placeInfowindow.setContent('<div><strong>' + placeResult.name + '</strong><br>' + 'Rating: ' + rating + '</div>');\n                placeInfowindow.open(marker.map, marker);\n                this.currentInfoWindow.close();\n                this.currentInfoWindow = placeInfowindow;\n                console.log(\"reach here\"); // showPanel(placeResult);\n\n                if (this.infoPane.classList.contains(\"open\")) {\n                  this.infoPane.classList.remove(\"open\");\n                } // Clear the previous details\n\n\n                while (this.infoPane.lastChild) {\n                  this.infoPane.removeChild(this.infoPane.lastChild);\n                }\n                /* TODO: Step 4E: Display a Place Photo with the Place Details */\n                // Add the primary photo, if there is one\n\n\n                if (placeResult.photos) {\n                  let firstPhoto = placeResult.photos[0];\n                  let photo = document.createElement('img');\n                  photo.classList.add('hero');\n                  photo.src = firstPhoto.getUrl();\n                  this.infoPane.appendChild(photo);\n                } // Add place details with text formatting\n\n\n                let name = document.createElement('h1');\n                name.classList.add('place');\n                name.textContent = placeResult.name;\n                this.infoPane.appendChild(name);\n\n                if (placeResult.rating) {\n                  let rating = document.createElement('p');\n                  rating.classList.add('details');\n                  rating.textContent = `Rating: ${placeResult.rating} \\u272e`;\n                  this.infoPane.appendChild(rating);\n                }\n\n                let address = document.createElement('p');\n                address.classList.add('details');\n                address.textContent = placeResult.formatted_address;\n                this.infoPane.appendChild(address);\n\n                if (placeResult.website) {\n                  let websitePara = document.createElement('p');\n                  let websiteLink = document.createElement('a');\n                  let websiteUrl = document.createTextNode(placeResult.website);\n                  websiteLink.appendChild(websiteUrl);\n                  websiteLink.title = placeResult.website;\n                  websiteLink.href = placeResult.website;\n                  websitePara.appendChild(websiteLink);\n                  this.infoPane.appendChild(websitePara);\n                } // Open the infoPane\n\n\n                this.infoPane.classList.add(\"open\");\n              } else {\n                console.log('showDetails failed: ' + status);\n              } // showDetails(placeResult, marker, status)\n\n            });\n          }); // Adjust the map bounds to include the location of this marker\n\n          this.bounds.extend(place.geometry.location);\n        });\n        /* Once all the markers have been placed, adjust the bounds of the map to\n         * show all the markers within the visible area. */\n\n        map.fitBounds(this.bounds);\n      } else {\n        console.log(\"doesn't work\");\n      }\n    });\n    console.log('fetchPlaces');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'text-center',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.setKeyword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, \"restaurant\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"10\",\n        height: \"512\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Map, {\n      style: {\n        width: \"95%\",\n        height: \"515\",\n        display: 'flex',\n        flexFlow: 'row nowrap'\n      },\n      onReady: this.fetchPlaces,\n      google: this.props.google,\n      zoom: 16,\n      initialCenter: {\n        lat: 40.33,\n        lng: -74.57\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 33\n      }\n    }))));\n  }\n\n}\n\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyCD_NjwMKIxeMBW5-KhgH2cntfYZdTc2A0\"\n})(MapContainer);","map":{"version":3,"sources":["/Users/shihaohuang/Documents/Mercury/community-management/client/src/MapContainer.js"],"names":["Map","InfoWindow","Marker","GoogleApiWrapper","Component","React","MapContainer","constructor","props","setKeyword","event","preventDefault","console","log","target","value","setState","keyword","forceUpdate","state","bounds","infoWindow","currentInfoWindow","service","infoPane","fetchPlaces","mapProps","map","google","maps","LatLngBounds","places","PlacesService","document","getElementById","isNull","err","request","location","lat","lng","rankBy","RankBy","DISTANCE","nearbySearch","results","status","PlacesServiceStatus","OK","forEach","place","marker","position","geometry","title","name","addListener","placeId","place_id","fields","getDetails","placeResult","placeInfowindow","rating","setContent","open","close","classList","contains","remove","lastChild","removeChild","photos","firstPhoto","photo","createElement","add","src","getUrl","appendChild","textContent","address","formatted_address","website","websitePara","websiteLink","websiteUrl","createTextNode","href","extend","fitBounds","render","width","height","display","flexFlow","apiKey"],"mappings":"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","sourcesContent":["import {Map, InfoWindow, Marker, GoogleApiWrapper} from 'google-maps-react';\nimport {Component} from \"react\";\nimport React from \"react\";\n\nclass MapContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            keyword: ''\n        };\n        let bounds;\n        let infoWindow;\n        let currentInfoWindow;\n        let service;\n        let infoPane;\n    }\n\n\n    // state = {\n    //     showingInfoWindow: false,\n    //     activeMarker: {},\n    //     selectedPlace: {},\n    // };\n    //\n    // onMarkerClick = (props, marker, e) =>\n    //     this.setState({\n    //         selectedPlace: props,\n    //         activeMarker: marker,\n    //         showingInfoWindow: true\n    //     });\n    //\n    // onMapClicked = (props) => {\n    //     if (this.state.showingInfoWindow) {\n    //         this.setState({\n    //             showingInfoWindow: false,\n    //             activeMarker: null\n    //         })\n    //     }\n    // };\n    setKeyword = (event) => {\n        event.preventDefault();\n        console.log('setKeyword: ' + event.target.value);\n        this.setState({\n            keyword: 'restaurant'\n        })\n        this.forceUpdate();\n    }\n\n\n    fetchPlaces(mapProps, map) {\n        const {google} = mapProps;\n\n        // const bounds = new google.maps.LatLngBounds();\n        // const infoWindow = new google.maps.InfoWindow;\n        // let currentInfoWindow = infoWindow;\n        // const service = new google.maps.places.PlacesService(map);\n        // let infoPane = document.getElementById('panel');\n\n        this.bounds = new google.maps.LatLngBounds();\n        this.infoWindow = new google.maps.InfoWindow;\n        this.currentInfoWindow = infoWindow;\n        this.service = new google.maps.places.PlacesService(map);\n        this.infoPane = document.getElementById('panel');\n\n\n\n        let isNull = false;\n\n        try {\n            console.log(this.state.keyword);\n            console.log('try')\n        }\n        catch(err) {\n\n            isNull = true;\n            console.log('still null');\n        }\n\n\n        let request = {\n            location: {\n                lat: 40.33, lng: -74.57\n            },\n            rankBy: google.maps.places.RankBy.DISTANCE,\n            // keyword: 'sushi'\n\n            keyword: isNull ? 'restaurant':console.log(this.state.keyword)\n        };\n\n        console.log(this.service);\n        // service.nearbySearch(request, this.nearbyCallback);\n\n\n        this.service.nearbySearch(request, function(results, status) {\n            if (status === google.maps.places.PlacesServiceStatus.OK) {\n                console.log(status);\n                results.forEach(place => {\n                let marker = new google.maps.Marker({\n                    position: place.geometry.location,\n                    map: map,\n                    title: place.name\n                });\n\n\n            //     /* TODO: Step 4B: Add click listeners to the markers */\n                // Add click listener to each marker\n                    google.maps.event.addListener(marker, 'click', () => {\n                    let request = {\n                        placeId: place.place_id,\n                        fields: ['name', 'formatted_address', 'geometry', 'rating',\n                            'website', 'photos']\n                    };\n\n                    /* Only fetch the details of a place when the user clicks on a marker.\n                     * If we fetch the details for all place results as soon as we get\n                     * the search response, we will hit API rate limits. */\n                    this.service.getDetails(request, (placeResult, status) => {\n                            if (status == google.maps.places.PlacesServiceStatus.OK) {\n                                let placeInfowindow = new google.maps.InfoWindow();\n                                let rating = \"None\";\n                                if (placeResult.rating) rating = placeResult.rating;\n                                placeInfowindow.setContent('<div><strong>' + placeResult.name +\n                                    '</strong><br>' + 'Rating: ' + rating + '</div>');\n                                placeInfowindow.open(marker.map, marker);\n                                this.currentInfoWindow.close();\n                                this.currentInfoWindow = placeInfowindow;\n                                console.log(\"reach here\");\n                                // showPanel(placeResult);\n\n                                if (this.infoPane.classList.contains(\"open\"))\n                                {\n                                    this.infoPane.classList.remove(\"open\");\n                                }\n\n                                // Clear the previous details\n                                while (this.infoPane.lastChild) {\n                                    this.infoPane.removeChild(this.infoPane.lastChild);\n                                }\n\n                                /* TODO: Step 4E: Display a Place Photo with the Place Details */\n                                // Add the primary photo, if there is one\n                                if (placeResult.photos) {\n                                    let firstPhoto = placeResult.photos[0];\n                                    let photo = document.createElement('img');\n                                    photo.classList.add('hero');\n                                    photo.src = firstPhoto.getUrl();\n                                    this.infoPane.appendChild(photo);\n                                }\n\n                                // Add place details with text formatting\n                                let name = document.createElement('h1');\n                                name.classList.add('place');\n                                name.textContent = placeResult.name;\n                                this.infoPane.appendChild(name);\n                                if (placeResult.rating) {\n                                    let rating = document.createElement('p');\n                                    rating.classList.add('details');\n                                    rating.textContent = `Rating: ${placeResult.rating} \\u272e`;\n                                    this.infoPane.appendChild(rating);\n                                }\n                                let address = document.createElement('p');\n                                address.classList.add('details');\n                                address.textContent = placeResult.formatted_address;\n                                this.infoPane.appendChild(address);\n                                if (placeResult.website) {\n                                    let websitePara = document.createElement('p');\n                                    let websiteLink = document.createElement('a');\n                                    let websiteUrl = document.createTextNode(placeResult.website);\n                                    websiteLink.appendChild(websiteUrl);\n                                    websiteLink.title = placeResult.website;\n                                    websiteLink.href = placeResult.website;\n                                    websitePara.appendChild(websiteLink);\n                                    this.infoPane.appendChild(websitePara);\n                                }\n\n                                // Open the infoPane\n                                this.infoPane.classList.add(\"open\");\n\n\n\n\n\n\n\n\n                            } else {\n                                console.log('showDetails failed: ' + status);\n                            }\n\n\n\n\n\n\n\n                        // showDetails(placeResult, marker, status)\n                    });\n                });\n\n                // Adjust the map bounds to include the location of this marker\n                this.bounds.extend(place.geometry.location);\n            });\n            /* Once all the markers have been placed, adjust the bounds of the map to\n             * show all the markers within the visible area. */\n            map.fitBounds(this.bounds);\n\n\n            }\n            else {\n                console.log(\"doesn't work\");\n            }\n        });\n\n\n\n\n\n\n        console.log('fetchPlaces');\n    }\n\n\n\n\n    render() {\n        return (\n            <div>\n            <div id=\"panel\"></div>\n            {/*// Important! Always set the container height explicitly*/}\n                <div className={'text-center'}>\n                    <button onClick={this.setKeyword}>restaurant</button>\n                            <div style={{width: \"10\", height: \"512\"}}>\n                                <Map\n                                    style={{width: \"95%\", height: \"515\", display:'flex', flexFlow: 'row nowrap'}}\n                                    onReady={this.fetchPlaces}\n                                    google={this.props.google} zoom={16}\n                                    initialCenter={{\n                                        lat: 40.33, lng: -74.57\n                                    }}\n                                    >\n                                    {/*<Marker position={{ lat: 40.33, lng: -74.57}} />*/}\n\n                                    {/*<Marker onClick={this.onMarkerClick}*/}\n                                            {/*name={'Current location'} />*/}\n\n                                    {/*<InfoWindow*/}\n                                        {/*marker={this.state.activeMarker}*/}\n                                        {/*visible={this.state.showingInfoWindow}>*/}\n                                        {/*<div>*/}\n                                            {/*<h1>{this.state.selectedPlace.name}</h1>*/}\n                                        {/*</div>*/}\n                                    {/*</InfoWindow>*/}\n\n                                </Map>\n\n\n                            </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport default GoogleApiWrapper({\n    apiKey: (\"AIzaSyCD_NjwMKIxeMBW5-KhgH2cntfYZdTc2A0\")\n})(MapContainer)"]},"metadata":{},"sourceType":"module"}